<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amish Made American Products Collection üá∫üá∏</title>
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Products Built By Amish Craftsman On Amazon Made In The USA üá∫üá∏" />
    <meta name="twitter:player" content="https://youtu.be/HFaZd0MnUms"
    <meta name="twitter:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQg6vLeFTuXejqjapMHpzeNrdQw3gs1hoLPZQiyyrONsA&s"
    <!-- End Twitter Card meta tags -->

    <style>
        /* Set background image */
        body {
            background-image: url('https://i.pinimg.com/originals/af/65/fb/af65fbf0f9f4f60657874bc16a6cb40e.jpg');
            background-size: cover; /* Adjust as needed */
            background-position: center; /* Adjust as needed */
            background-attachment: fixed;
        }
    </style>
    
    <style>    
        .screen-width-image {
            width: 100%;
            height: auto; /* Maintain aspect ratio */
        }

        /* Your existing CSS styles */
        h, h2 {
            font-size: 24px; /* Adjust the font size as needed */
            font-weight: bold; /* Make the font bold */
            text-align: center; /* Center align the text */
        }

        p {
            text-align: center;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-top: 20px;
        }

        .product {
            position: relative;
            width: 30%;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
        }

        /* Media query for mobile devices (max-width: 768px) */
        @media only screen and (max-width: 768px) {
            .product {
                width: 100%;
            }
        }

        .product-img {
            max-width: 75%;
            height: auto;
            cursor: pointer;
        }

        .description {
            width: 100%;
            font-size: 45px;
            margin-bottom: 45px;
        }

        .price {
            width: 100%;
            font-size: 20px;
            margin-bottom: 70px;
            color:#1517b1
        }

        /* Styling for the Twitter share button */
        .twitter-button, .share-button, .buy-button {
            flex: 1;
            justify-content: space-between;
            margin-top: 5px;
            padding: 10px;
            font-size: 14px;
            border-radius: 4px;
            cursor: pointer;
        }
        /* Styling for the Twitter button */
        .twitter-button {
            background-color: #041424;
            color: white;
        }

        .twitter-button:hover {
            background-color: #3a3a3b;
        }

        /* Style for the buy button */
        .buy-button {
            background-color: #fdbf4b;
            color: rgb(16, 15, 15);
        }

        .buy-button:hover {
            background-color: #f8f546;
        }

        /* Styling for the share button */
        .share-button {
            background-color: #041424;
            color: white;
        }

        .share-button:hover {
            background-color: #585857;
        }

        /* Flex container for buttons */
        .button-container {
            display: flex;
            justify-content: space-between;
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
        }

        .sticky-buttons {
            position: fixed;
            bottom: 10px;
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000; /* Ensure buttons stay above other content */
        }

        #twitter-share-button {
            background-color: #1da1f2;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

    </style>
</head>
<body> 
    <h2>Products Built By The Amish... Made In The USA üá∫üá∏</h2><h2>Other American Made Product Sites Coming Soon!</h2><h2>Thank You For Supporting American Manufacturers</h2>
    <img class="screen-width-image" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQg6vLeFTuXejqjapMHpzeNrdQw3gs1hoLPZQiyyrONsA&s" alt="Image Placeholder">
    <h2>More Products And Pages Coming Soon</h2>

    <div class="container" id="product-container">
        <!-- Products will be displayed here -->
    </div>

    <div class="sticky-buttons">
        <!-- Custom "Post On X" button -->
        <button id="twitter-share-button" onclick="sharePage()">Post On X</button>
        <!-- Button to share the entire page -->
    </div>

    <script>
        // Function to fetch CSV data and update product display
        function fetchDataAndDisplay() {
            fetch('products.csv')
                .then(response => response.text())
                .then(data => {
                    const rows = data.split('\n').slice(1); // Remove header row
                    const container = document.getElementById('product-container');

                    // Create an array to store existing product URLs
                    const existingProductUrls = [];

                    // Loop through existing product containers and collect their product URLs
                    container.querySelectorAll('.product').forEach(productContainer => {
                        const productUrl = productContainer.querySelector('img').getAttribute('onclick').match(/'([^']+)'/)[1];
                        existingProductUrls.push(productUrl);
                    });

                    // Loop through new CSV data and update or add product containers
                    rows.forEach(row => {
                        const columns = row.split(',');
                        if (columns.length === 4) { // Check if all columns are present
                            const description = columns[0].trim();
                            const imageUrl = columns[1].trim();
                            const price = columns[2].trim();
                            const productUrl = columns[3].trim();

                            const productHTML = `
                                <div class="product">
                                    <img class="product-img" src="${imageUrl}" alt="${description}" onclick="window.open('${productUrl}', '_blank')">
                                    <p class="description">${description}</p>
                                    <p class="price">Price: ${price}</p>
                                    <div class="button-container">
                                        <!-- Twitter share button for individual product -->
                                        <button class="twitter-button" onclick="shareProductToTwitter('${productUrl}')">Post On ùïè</button>
                                        <button class="buy-button" onclick="window.open('${productUrl}', '_blank')">Buy On Amazon.com</button>
                                        <!-- Share button -->
                                        <button class="share-button" onclick="copyProductUrl('${productUrl}')">Copy And Share</button>
                                    </div>
                                </div>
                            `;

                            // If product URL already exists in the DOM, update its HTML; otherwise, append new product container
                            if (existingProductUrls.includes(productUrl)) {
                                const existingProductContainer = container.querySelector(`.product img[onclick="window.open('${productUrl}', '_blank')"]`).parentNode;
                                existingProductContainer.innerHTML = productHTML;
                            } else {
                                container.innerHTML += productHTML;
                            }

                            // Remove the product URL from existingProductUrls array to keep track of updated products
                            const index = existingProductUrls.indexOf(productUrl);
                            if (index > -1) {
                                existingProductUrls.splice(index, 1);
                            }
                        }
                    });

                    // Remove any product containers that correspond to products no longer present in the updated CSV data
                    existingProductUrls.forEach(productUrl => {
                        const productContainerToRemove = container.querySelector(`.product img[onclick="window.open('${productUrl}', '_blank')"]`).parentNode;
                        container.removeChild(productContainerToRemove);
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Function to copy product URL to clipboard
        function copyProductUrl(productUrl) {
            navigator.clipboard.writeText(productUrl)
                .then(() => {
                    console.log('Product URL copied to clipboard:', productUrl);
                    alert('Product URL copied to clipboard!');
                })
                .catch(err => {
                    console.error('Error copying product URL to clipboard:', err);
                    alert('Failed to copy product URL!');
                });
        }

        // Function to share the entire page URL
        function sharePage() {
            const pageUrl = window.location.href;
            const tweetUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(pageUrl)}`;
            window.open(tweetUrl, '_blank');
        }

        // Function to share product URL on Twitter
        function shareProductToTwitter(productUrl) {
            const tweetUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(productUrl)}`;
            window.open(tweetUrl, '_blank');
        }

        // Fetch data initially and then refresh every 60 seconds
        fetchDataAndDisplay();
        setInterval(fetchDataAndDisplay, 6000000); // 6000000 ms = 10 minutes

        // Add event listener to the page share button
        document.getElementById('page-share-button').addEventListener('click', sharePage);
    </script>
    <a>As an Amazon Associate I May Earn A Commission On Any Products Bought Through These Links. I hope You Enjoy Your Products!</a>
</body>
</html>
