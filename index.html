<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amish Furniture Collection</title>
    <style>
        /* Your existing CSS styles */
        h {
            font-size: 24px; /* Adjust the font size as needed */
            font-weight: bold; /* Make the font bold */
            text-align: center; /* Center align the text */
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-top: 20px;
        }

        .product {
            position: relative; /* Added position relative for positioning the share button */
            width: 30%;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }

        /* Media query for mobile devices (max-width: 768px) */
        @media only screen and (max-width: 768px) {
            .product {
                width: 100%; /* Each product container occupies 100% of the available width */
            }
        }

        img {
            max-width: 100%;
            height: auto;
            cursor: pointer;
        }

        /* Styling for the Twitter share button */
        .twitter-button {
            position: absolute;
            bottom: 10px; /* Adjust as needed */
            left: 10px; /* Adjust as needed */
            background-color: #0c0c0c; /* Twitter brand color */
            color: white;
            border: none;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            height: 30px;
            border-radius: 10%;
            cursor: pointer;
        }

        .twitter-button:hover {
            background-color: #202d38; /* Darker shade of Twitter brand color on hover */
        }

        .buy-button {
            background-color: #747a16;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin-top: 10px;
            border-radius: 4px;
            cursor: pointer;
        }

        .buy-button:hover {
            background-color: #f8f546;
        }

        /* Styling for the share button */
        .share-button {
            position: absolute;
            bottom: 10px; /* Adjust as needed */
            right: 10px; /* Adjust as needed */
            background-color: #007bff;
            color: white;
            border: none;
            width: 80px;
            height: 30px;
            border-radius: 10%;
            cursor: pointer;
        }

        .share-button:hover {
            background-color: #b2f787;
        }

        /* Style for the page share button */
        #page-share-button {
            position: fixed;
            bottom: 20px; /* Adjust as needed */
            right: 20px; /* Adjust as needed */
            background-color: #117cef;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        #page-share-button:hover {
            background-color: #0056b3;
        }

        /* Style for the custom "Post On ùïè" button */
        #twitter-share-button {
            position: fixed;
            bottom: 20px; /* Adjust as needed */
            left: 20px; /* Adjust as needed */
            background-color: #111212; /* Twitter brand color */
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        #twitter-share-button:hover {
            background-color: #58a1ea; /* Darker shade of Twitter brand color on hover */
        }
    </style>
</head>
<body>
    <h>As an Amazon Associate I May Earn A Commission On Any Products Bought Through These Links. I hope You Enjoy Your Products!</h>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9963895832691583"
        crossorigin="anonymous"></script>
    <!-- Product -->
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-9963895832691583"
        data-ad-slot="8563065810"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<div class="container" id="product-container">
    <!-- Products will be displayed here -->
</div>

<!-- Button to share the entire page -->
<button id="page-share-button">Copy And Share</button>

<!-- Custom "Post On ùïè" button for sharing the page to Twitter -->
<button id="twitter-share-button" onclick="sharePage()">Post On ùïè</button>

<script>
    // Function to fetch CSV data and update product display
    function fetchDataAndDisplay() {
        fetch('products.csv')
            .then(response => response.text())
            .then(data => {
                const rows = data.split('\n').slice(1); // Remove header row
                const container = document.getElementById('product-container');

                // Create an array to store existing product URLs
                const existingProductUrls = [];

                // Loop through existing product containers and collect their product URLs
                container.querySelectorAll('.product').forEach(productContainer => {
                    const productUrl = productContainer.querySelector('img').getAttribute('onclick').match(/'([^']+)'/)[1];
                    existingProductUrls.push(productUrl);
                });

                // Loop through new CSV data and update or add product containers
                rows.forEach(row => {
                    const columns = row.split(',');
                    if (columns.length === 4) { // Check if all columns are present
                        const description = columns[0].trim();
                        const imageUrl = columns[1].trim();
                        const price = columns[2].trim();
                        const productUrl = columns[3].trim();

                        const productHTML = `
                            <div class="product">
                                <img src="${imageUrl}" alt="${description}" onclick="window.open('${productUrl}', '_blank')">
                                <h3>${description}</h3>
                                <p>Price: ${price}</p>
                                <button class="buy-button" onclick="window.open('${productUrl}', '_blank')">Buy Now</button>
                                <!-- Share button -->
                                <button class="share-button" onclick="copyProductUrl('${productUrl}')">Copy And Share</button>
                                <!-- Twitter share button for individual product -->
                                <button class="twitter-button" onclick="shareProductToTwitter('${productUrl}')">Post On ùïè</button>
                            </div>
                        `;

                        // If product URL already exists in the DOM, update its HTML; otherwise, append new product container
                        if (existingProductUrls.includes(productUrl)) {
                            const existingProductContainer = container.querySelector(`.product img[onclick="window.open('${productUrl}', '_blank')"]`).parentNode;
                            existingProductContainer.innerHTML = productHTML;
                        } else {
                            container.innerHTML += productHTML;
                        }

                        // Remove the product URL from existingProductUrls array to keep track of updated products
                        const index = existingProductUrls.indexOf(productUrl);
                        if (index > -1) {
                            existingProductUrls.splice(index, 1);
                        }
                    }
                });

                // Remove any product containers that correspond to products no longer present in the updated CSV data
                existingProductUrls.forEach(productUrl => {
                    const productContainerToRemove = container.querySelector(`.product img[onclick="window.open('${productUrl}', '_blank')"]`).parentNode;
                    container.removeChild(productContainerToRemove);
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    }

    // Function to copy product URL to clipboard
    function copyProductUrl(productUrl) {
        navigator.clipboard.writeText(productUrl)
            .then(() => {
                console.log('Product URL copied to clipboard:', productUrl);
                alert('Product URL copied to clipboard!');
            })
            .catch(err => {
                console.error('Error copying product URL to clipboard:', err);
                alert('Failed to copy product URL!');
            });
    }

    // Function to share the entire page URL
    function sharePage() {
        const pageUrl = window.location.href;
        const tweetUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(pageUrl)}`;
        window.open(tweetUrl, '_blank');
    }

    // Function to share product URL on Twitter
    function shareProductToTwitter(productUrl) {
        const tweetUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(productUrl)}`;
        window.open(tweetUrl, '_blank');
    }

    // Fetch data initially and then refresh every 60 seconds
    fetchDataAndDisplay();
    setInterval(fetchDataAndDisplay, 6000000); // 6000000 ms = 10 minutes

    // Add event listener to the page share button
    document.getElementById('page-share-button').addEventListener('click', sharePage);
</script>

</body>
</html>
